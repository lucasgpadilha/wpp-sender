(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[759],{1700:function(e,t,r){Promise.resolve().then(r.bind(r,3459))},3459:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return N}});var s=r(7573),n=r(7653),a=r(466),i=r(2196),o=r(188),l=r(9324),c=r(9134),d=r(6529),u=r(7930),f=r(1988),m=r(5969),h=r(5118),p=r(7787);function x(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,r=(0,u.NL)(),{data:s,isLoading:n}=(0,f.a)({queryKey:["contacts",e,t],queryFn:async()=>(await h.Z.get("/contacts?page=".concat(e,"&limit=").concat(t))).data,placeholderData:e=>e}),a=(0,m.D)({mutationFn:async e=>{let t=new FormData;return t.append("file",e),(await h.Z.post("/contacts/import",t,{headers:{"Content-Type":"multipart/form-data"}})).data},onSuccess:e=>{r.invalidateQueries({queryKey:["contacts"]}),p.A.success("Imported ".concat(e.imported," contacts successfully"))},onError:()=>{p.A.error("Failed to import contacts")}});return{contacts:(null==s?void 0:s.data)||[],meta:null==s?void 0:s.meta,isLoading:n,importContacts:a.mutateAsync,isImporting:a.isPending}}let g=(0,r(2389).Z)("upload",[["path",{d:"M12 3v12",key:"1x0j5s"}],["path",{d:"m17 8-5-5-5 5",key:"7q97r8"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}]]);var b=r(5721);function v(){let[e,t]=(0,n.useState)(!1),[r,i]=(0,n.useState)(null),{importContacts:o,isImporting:u}=x(),f=async e=>{if(e.preventDefault(),r)try{await o(r),t(!1),i(null)}catch(e){}};return(0,s.jsxs)(l.Vq,{open:e,onOpenChange:t,children:[(0,s.jsx)(l.hg,{asChild:!0,children:(0,s.jsxs)(a.z,{variant:"outline",children:[(0,s.jsx)(g,{className:"mr-2 h-4 w-4"})," Importar CSV"]})}),(0,s.jsxs)(l.cZ,{className:"sm:max-w-[425px]",children:[(0,s.jsxs)(l.fK,{children:[(0,s.jsx)(l.$N,{children:"Importar Contatos"}),(0,s.jsx)(l.Be,{children:"Selecione um arquivo CSV com as colunas: Name, Phone, Email, Tags."})]}),(0,s.jsxs)("form",{onSubmit:f,className:"grid gap-4 py-4",children:[(0,s.jsxs)("div",{className:"grid w-full max-w-sm items-center gap-1.5",children:[(0,s.jsx)(d.Label,{htmlFor:"csv",children:"Arquivo CSV"}),(0,s.jsx)(c.I,{id:"csv",type:"file",accept:".csv",onChange:e=>{var t;return i((null===(t=e.target.files)||void 0===t?void 0:t[0])||null)}})]}),(0,s.jsx)(l.cN,{children:(0,s.jsxs)(a.z,{type:"submit",disabled:!r||u,children:[u&&(0,s.jsx)(b.Z,{className:"mr-2 h-4 w-4 animate-spin"}),"Importar"]})})]})]})]})}var y=r(8410),j=r(2966);function N(){let[e,t]=(0,n.useState)(1),{contacts:r,meta:l,isLoading:c}=x(e);return(0,s.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"Contatos"}),(0,s.jsx)(v,{})]}),(0,s.jsxs)(i.Zb,{children:[(0,s.jsx)(i.Ol,{children:(0,s.jsxs)(i.ll,{children:["Base de Contatos ",(null==l?void 0:l.total)?"(".concat(l.total,")"):""]})}),(0,s.jsx)(i.aY,{children:(0,s.jsxs)(o.iA,{children:[(0,s.jsx)(o.xD,{children:(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.ss,{children:"Nome"}),(0,s.jsx)(o.ss,{children:"Telefone"}),(0,s.jsx)(o.ss,{children:"Tags"}),(0,s.jsx)(o.ss,{children:"Adicionado em"})]})}),(0,s.jsxs)(o.RM,{children:[c&&(0,s.jsx)(o.SC,{children:(0,s.jsx)(o.pj,{colSpan:4,children:"Carregando..."})}),r.map(e=>(0,s.jsxs)(o.SC,{children:[(0,s.jsx)(o.pj,{children:e.name}),(0,s.jsx)(o.pj,{children:e.phone}),(0,s.jsx)(o.pj,{children:e.tags.map(e=>(0,s.jsx)("span",{className:"mr-1 rounded bg-gray-100 px-2 py-1 text-xs",children:e},e))}),(0,s.jsx)(o.pj,{children:new Date(e.created_at).toLocaleDateString()})]},e.id)),!c&&0===r.length&&(0,s.jsx)(o.SC,{children:(0,s.jsx)(o.pj,{colSpan:4,className:"text-center text-muted-foreground",children:"Nenhum contato encontrado."})})]})]})}),(0,s.jsxs)(i.eW,{className:"flex items-center justify-end space-x-2",children:[(0,s.jsxs)("div",{className:"text-xs text-muted-foreground",children:["P\xe1gina ",(null==l?void 0:l.page)||1," de ",(null==l?void 0:l.totalPages)||1]}),(0,s.jsx)(a.z,{variant:"outline",size:"sm",onClick:()=>t(e=>Math.max(1,e-1)),disabled:1===e||c,children:(0,s.jsx)(y.Z,{className:"h-4 w-4"})}),(0,s.jsx)(a.z,{variant:"outline",size:"sm",onClick:()=>t(e=>e+1),disabled:!l||e>=l.totalPages||c,children:(0,s.jsx)(j.Z,{className:"h-4 w-4"})})]})]})]})}},466:function(e,t,r){"use strict";r.d(t,{d:function(){return l},z:function(){return c}});var s=r(7573),n=r(7653),a=r(8828),i=r(9289),o=r(9147);let l=(0,i.j)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),c=n.forwardRef((e,t)=>{let{className:r,variant:n,size:i,asChild:c=!1,...d}=e,u=c?a.g7:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:n,size:i,className:r})),ref:t,...d})});c.displayName="Button"},2196:function(e,t,r){"use strict";r.d(t,{Ol:function(){return o},SZ:function(){return c},Zb:function(){return i},aY:function(){return d},eW:function(){return u},ll:function(){return l}});var s=r(7573),n=r(7653),a=r(9147);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("rounded-xl border bg-card text-card-foreground shadow",r),...n})});i.displayName="Card";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",r),...n})});o.displayName="CardHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("font-semibold leading-none tracking-tight",r),...n})});l.displayName="CardTitle";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("text-sm text-muted-foreground",r),...n})});c.displayName="CardDescription";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("p-6 pt-0",r),...n})});d.displayName="CardContent";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{ref:t,className:(0,a.cn)("flex items-center p-6 pt-0",r),...n})});u.displayName="CardFooter"},9324:function(e,t,r){"use strict";r.d(t,{$N:function(){return p},Be:function(){return x},Vq:function(){return l},cN:function(){return h},cZ:function(){return f},fK:function(){return m},hg:function(){return c}});var s=r(7573),n=r(7653),a=r(7965),i=r(269),o=r(9147);let l=a.fC,c=a.xz,d=a.h_;a.x8;let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.aV,{ref:t,className:(0,o.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r),...n})});u.displayName=a.aV.displayName;let f=n.forwardRef((e,t)=>{let{className:r,children:n,...l}=e;return(0,s.jsxs)(d,{children:[(0,s.jsx)(u,{}),(0,s.jsxs)(a.VY,{ref:t,className:(0,o.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r),...l,children:[n,(0,s.jsxs)(a.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(i.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});f.displayName=a.VY.displayName;let m=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...r})};m.displayName="DialogHeader";let h=e=>{let{className:t,...r}=e;return(0,s.jsx)("div",{className:(0,o.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...r})};h.displayName="DialogFooter";let p=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.Dx,{ref:t,className:(0,o.cn)("text-lg font-semibold leading-none tracking-tight",r),...n})});p.displayName=a.Dx.displayName;let x=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.dk,{ref:t,className:(0,o.cn)("text-sm text-muted-foreground",r),...n})});x.displayName=a.dk.displayName},9134:function(e,t,r){"use strict";r.d(t,{I:function(){return i}});var s=r(7573),n=r(7653),a=r(9147);let i=n.forwardRef((e,t)=>{let{className:r,type:n,...i}=e;return(0,s.jsx)("input",{type:n,className:(0,a.cn)("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...i})});i.displayName="Input"},6529:function(e,t,r){"use strict";r.d(t,{Label:function(){return c}});var s=r(7573),n=r(7653),a=r(1001),i=r(9289),o=r(9147);let l=(0,i.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)(a.f,{ref:t,className:(0,o.cn)(l(),r),...n})});c.displayName=a.f.displayName},188:function(e,t,r){"use strict";r.d(t,{RM:function(){return l},SC:function(){return c},iA:function(){return i},pj:function(){return u},ss:function(){return d},xD:function(){return o}});var s=r(7573),n=r(7653),a=r(9147);let i=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:t,className:(0,a.cn)("w-full caption-bottom text-sm",r),...n})})});i.displayName="Table";let o=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("thead",{ref:t,className:(0,a.cn)("[&_tr]:border-b",r),...n})});o.displayName="TableHeader";let l=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tbody",{ref:t,className:(0,a.cn)("[&_tr:last-child]:border-0",r),...n})});l.displayName="TableBody",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tfoot",{ref:t,className:(0,a.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...n})}).displayName="TableFooter";let c=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("tr",{ref:t,className:(0,a.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...n})});c.displayName="TableRow";let d=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("th",{ref:t,className:(0,a.cn)("h-10 px-2 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...n})});d.displayName="TableHead";let u=n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("td",{ref:t,className:(0,a.cn)("p-2 align-middle [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",r),...n})});u.displayName="TableCell",n.forwardRef((e,t)=>{let{className:r,...n}=e;return(0,s.jsx)("caption",{ref:t,className:(0,a.cn)("mt-4 text-sm text-muted-foreground",r),...n})}).displayName="TableCaption"},5118:function(e,t,r){"use strict";var s=r(3908),n=r(4859);let a=s.Z.create({baseURL:n.env.NEXT_PUBLIC_API_URL||"http://localhost:3001",headers:{"Content-Type":"application/json"}});a.interceptors.request.use(e=>{{let t=localStorage.getItem("token");t&&(e.headers.Authorization="Bearer ".concat(t))}return e}),a.interceptors.response.use(e=>e,e=>{var t;return(null===(t=e.response)||void 0===t?void 0:t.status)===401&&(localStorage.removeItem("token"),window.location.href="/auth/login"),Promise.reject(e)}),t.Z=a},9147:function(e,t,r){"use strict";r.d(t,{cn:function(){return a}});var s=r(607),n=r(5579);function a(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,n.m6)((0,s.W)(t))}},8410:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(2389).Z)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},2966:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(2389).Z)("chevron-right",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},5721:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});let s=(0,r(2389).Z)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},1001:function(e,t,r){"use strict";r.d(t,{f:function(){return o}});var s=r(7653),n=r(8378),a=r(7573),i=s.forwardRef((e,t)=>(0,a.jsx)(n.WV.label,{...e,ref:t,onMouseDown:t=>{var r;t.target.closest("button, input, select, textarea")||(null===(r=e.onMouseDown)||void 0===r||r.call(e,t),!t.defaultPrevented&&t.detail>1&&t.preventDefault())}}));i.displayName="Label";var o=i},5969:function(e,t,r){"use strict";r.d(t,{D:function(){return d}});var s=r(7653),n=r(4855),a=r(2906),i=r(4559),o=r(803),l=class extends i.l{#e;#t=void 0;#r;#s;constructor(e,t){super(),this.#e=e,this.setOptions(t),this.bindMethods(),this.#n()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(e){let t=this.options;this.options=this.#e.defaultMutationOptions(e),(0,o.VS)(this.options,t)||this.#e.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#r,observer:this}),t?.mutationKey&&this.options.mutationKey&&(0,o.Ym)(t.mutationKey)!==(0,o.Ym)(this.options.mutationKey)?this.reset():this.#r?.state.status==="pending"&&this.#r.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#r?.removeObserver(this)}onMutationUpdate(e){this.#n(),this.#a(e)}getCurrentResult(){return this.#t}reset(){this.#r?.removeObserver(this),this.#r=void 0,this.#n(),this.#a()}mutate(e,t){return this.#s=t,this.#r?.removeObserver(this),this.#r=this.#e.getMutationCache().build(this.#e,this.options),this.#r.addObserver(this),this.#r.execute(e)}#n(){let e=this.#r?.state??(0,n.R)();this.#t={...e,isPending:"pending"===e.status,isSuccess:"success"===e.status,isError:"error"===e.status,isIdle:"idle"===e.status,mutate:this.mutate,reset:this.reset}}#a(e){a.Vr.batch(()=>{if(this.#s&&this.hasListeners()){let t=this.#t.variables,r=this.#t.context,s={client:this.#e,meta:this.options.meta,mutationKey:this.options.mutationKey};e?.type==="success"?(this.#s.onSuccess?.(e.data,t,r,s),this.#s.onSettled?.(e.data,null,t,r,s)):e?.type==="error"&&(this.#s.onError?.(e.error,t,r,s),this.#s.onSettled?.(void 0,e.error,t,r,s))}this.listeners.forEach(e=>{e(this.#t)})})}},c=r(7930);function d(e,t){let r=(0,c.NL)(t),[n]=s.useState(()=>new l(r,e));s.useEffect(()=>{n.setOptions(e)},[n,e]);let i=s.useSyncExternalStore(s.useCallback(e=>n.subscribe(a.Vr.batchCalls(e)),[n]),()=>n.getCurrentResult(),()=>n.getCurrentResult()),d=s.useCallback((e,t)=>{n.mutate(e,t).catch(o.ZT)},[n]);if(i.error&&(0,o.L3)(n.options.throwOnError,[i.error]))throw i.error;return{...i,mutate:d,mutateAsync:i.mutate}}}},function(e){e.O(0,[661,760,571,682,171,988,293,528,744],function(){return e(e.s=1700)}),_N_E=e.O()}]);